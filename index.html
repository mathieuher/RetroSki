<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="./src/scss/game.scss">
    <link rel="icon" type="image/x-icon" href="./src/images/icons/favicon.ico" />
    <link rel="stylesheet"
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0" />
    <script src="https://kit.fontawesome.com/202f92be3c.js" crossorigin="anonymous"></script>
    <title>Retro Ski</title>
</head>

<body>
    <div class="ui-container">
        <div class="hud-container">
            <div class="actions-toolbar">
                <i id="sound-mute-button" class="fa-solid fa-volume-high"></i>
                <i id="sound-button" class="fa-solid fa-volume-xmark"></i>
            </div>
            <div id="welcome">
                <div class="dialog">
                    <div class="title">‚ùÑÔ∏è Welcome</div>
                    <div class="dialog-content">
                        <p>
                            Hey Skier üòÉ<br>
                            Welcome on RetroSki, let me give you some informations before joining the mountain
                        </p>
                        <div class="section-title">‚ùì What is RetroSki ?</div>
                        <p>
                            RetroSki is a small game development project to challenge your friends on randomly generated 2D alpine ski tracks
                        </p>
                        <div class="section-title">üéÆ Controls</div>
                        <p>
                            You can play with a ‚å®Ô∏è Keyboard or with a üéÆ Gamepad (Xbox gamepad like)<br>
                            <small>Note: For the moment touch devices are not supported but you can still play by linking a bluetooth gamepad to your device</small>
                        </p>
                        <div class="table-container">
                            <table>
                                <tr>
                                    <th>During the race</th>
                                    <th class="controls">‚å®Ô∏è Keyboard</th>
                                    <th class="controls">üéÆ Gamepad</th>
                                </tr>
                                <tr>
                                    <td>Start skiing (1x)</td>
                                    <td><img src="src/images/icons/keyboard_arrow_up.png" valign="bottom"/></td>
                                    <td><img src="src/images/icons/gamepad_a.png" valign="bottom"/></td>
                                </tr>
                                <tr>
                                    <td>Carving</td>
                                    <td><img src="src/images/icons/keyboard_arrow_left.png" valign="bottom"/><img src="src/images/icons/keyboard_arrow_right.png" valign="bottom"/></td>
                                    <td><img src="src/images/icons/gamepad_left_stick.png" valign="bottom"/></td>
                                </tr>
                                <tr>
                                    <td>Braking/Sliding</td>
                                    <td><img src="src/images/icons/keyboard_space.png" valign="bottom"/></td>
                                    <td><img src="src/images/icons/gamepad_b.png" valign="bottom"/></td>
                                </tr>
                                <tr>
                                    <td>Show/hide ghosts</td>
                                    <td><img src="src/images/icons/keyboard_g.png" valign="bottom"/></td>
                                    <td><img src="src/images/icons/gamepad_left_bumper.png" valign="bottom"/></td>
                                </tr>
                                <tr>
                                    <td>Return to the event manager (restart the race)</td>
                                    <td><img src="src/images/icons/keyboard_exit.png" valign="bottom"/></td>
                                    <td><img src="src/images/icons/gamepad_select.png" valign="bottom"/></td>
                                </tr>
                                <tr>
                                    <td>Toggle debug mode</td>
                                    <td><img src="src/images/icons/keyboard_d.png" valign="bottom"/></td>
                                    <td></td>
                                </tr>
                            </table>
                        </div>
                        <div class="table-container">
                            <table>
                                <tr>
                                    <th>Event Manager</th>
                                    <th class="controls">‚å®Ô∏è Keyboard</th>
                                    <th class="controls">üéÆ Gamepad</th>
                                </tr>
                                <tr>
                                    <td>Leave the event and go back to event setup</td>
                                    <td><img src="src/images/icons/keyboard_exit.png" valign="bottom"/></td>
                                    <td><img src="src/images/icons/gamepad_select.png" valign="bottom"/></td>
                                </tr>
                            </table>
                        </div>
                        <div class="section-title">üìò Gamer guide</div>
                        <div class="section-subtitle">Event setup</div>
                        <p>
                            Helps you to provide few informations to setup your ride event :
                        </p>
                        <ol>
                            <li>Name of the track (if the track doesn't exist it generates a new one)<br>
                                <small>Note: Check one of the preloaded tracks below for your first ride</small>
                            </li>
                            <li>Style of the track (Slalom, Giant slalom, Super-G or Downhill)<br>
                                <small>Note: This param is only applied when generating a new track.</small>
                            </li>
                            <li>Name of the first player</li>
                            <li>Name of the second player</li>
                            <li>Number of races (1 to 10 is recommended)</li>
                        </ol>

                        <div class="section-subtitle">Event manager</div>
                        <p>
                            Home place before and after each race.
                            It provides informations and results about the current event.
                        </p>
                        <div class="section-subtitle">Race</div>
                        <p>
                            You made it to the top of the hill !<br>
                            Now it's time to have fun and enjoy some nice carving !<br>
                            Press (1x) ‚å®Ô∏è<img src="src/images/icons/keyboard_arrow_up.png" valign="bottom"/> or üéÆ<img src="src/images/icons/gamepad_a.png" valign="bottom"/> to start skiing and see you at the finish line !<br>
                            ‚ö†Ô∏è Don't miss a gate or you'll receive a penalty of 3 seconds
                        </p>
                        <div class="section-title">üí° Tips</div>
                        <div class="section-subtitle">Preloaded tracks</div>
                        <p>By default the game provides 5 tracks, so you can use the same track as your friends even on a different setup.</p>
                        <ol>
                            <li><img src="https://www.kidlink.org/icons/f0-ch.gif" valign="middle"/> Davos (Giant slalom)</li>
                            <li><img src="https://www.kidlink.org/icons/f0-ch.gif" valign="middle"/> Adelboden (Slalom)</li>
                            <li><img src="https://www.kidlink.org/icons/f0-at.gif" valign="middle"/> Soelden (Giant slalom)</li>
                            <li><img src="https://www.kidlink.org/icons/f0-ch.gif" valign="middle"/> Wengen (Super-G)</li>
                            <li><img src="https://www.kidlink.org/icons/f0-ch.gif" valign="middle"/> Zermatt (Downhill)</li>
                        </ol>
                        <div class="section-subtitle">Different track styles</div>
                        <p>
                            Each track style follow is own rule.<br>
                            The dynamic of the skier is also impacted by the style of the track to mimic real world differences.<br>
                            <small>Note: For your first rides, Giant slalom is a good style to start gaining some experience</small>
                        </p>
                        <div class="section-subtitle">Keep your records</div>
                        <p>
                            RetroSki use localStorage to persist generated tracks and records.<br>
                            You can easily export them and share them with friends by using the browser developper tools.
                        </p>
                        <div class="table-container">
                            <table>
                                <tr>
                                    <th class="controls">Ghost mode</th>
                                    <th>Description</th>
                                </tr>
                                <tr>
                                    <td><img src="src/images/icons/global_record_ghost.png" valign="bottom"/></td>
                                    <td>Absolute best time on the track</td>
                                </tr>
                                <tr>
                                    <td><img src="src/images/icons/event_record_ghost.png" valign="bottom"/></td>
                                    <td>Current event best time on the track</td>
                                </tr>
                            </table>
                        </div>
                        <div class="section-title">üë∑‚Äç‚ôÇÔ∏è Follow the project</div>
                        <p>
                            <a href="https://github.com/mathieuher/RetroSki">View the project on Github</a>
                        </p>
                        <div class="section-title">üèÖ Support the project</div>
                        <p>
                            RetroSki is a small game development project freely provided to you<br>
                            Be sure to enjoy your time on the mountain with us üòÉ<br>
                            Feel free to support this project üôè<br>
                            <a href="https://donate.stripe.com/7sIaGu2wO52K9S8aEE">‚ù§Ô∏è Show your support</a>
                            
                        </p>
                    </div>
                    <div class="dialog-actions">
                        <button id="exit-welcome-button">Setup a new event</button>
                    </div>
                </div>
            </div>

            <div id="event-setup">
                <div class="dialog">
                    <div class="title"><i id="back-to-welcome-button" class="fa-solid fa-arrow-left"></i> Event setup</div>
                    <div class="dialog-content">
                        <div class="form-line">
                            <div class="label">Track</div>
                            <input type="text" id="track-input"
                                placeholder="Soelden, Davos, Wengen, Adelboden, Zermatt..." />
                        </div>
                        <div class="form-line">
                            <div class="label">Style <small>(only used when generating a new track)</small></div>
                            <select id="track-style-select">
                                <option value="SL">Slalom</option>
                                <option selected value="GS">Giant slalom</option>
                                <option value="SG">Super-G</option>
                                <option value="DH">Downhill</option>
                            </select>
                        </div>
                        <div class="form-line">
                            <div class="label">Skier 1</div>
                            <input type="text" id="skier-1-input" placeholder="Skier 1 name" />
                        </div>
                        <div class="form-line">
                            <div class="label">Skier 2</div>
                            <input type="text" id="skier-2-input" placeholder="Skier 2 name" />
                        </div>
                        <div class="form-line">
                            <div class="label">Number of races</div>
                            <input type="number" id="races-number-input" value="1" min="1" max="10" />
                        </div>
                    </div>
                    <div class="dialog-actions">
                        <button id="setup-completed-button">Start the event</button>
                    </div>
                </div>
            </div>
            <div id="event-manager">
                <div class="dialog">
                    <div class="title"><i id="back-to-setup-button" class="fa-solid fa-arrow-left"></i> Event manager</div>
                    <div class="dialog-content">
                        <div class="info-tables">
                            <div class="section-title">Last results</div>
                            <div class="races-table">
                                <div class="header-line">
                                    <div class="number">Race</div>
                                    <div>Track</div>
                                    <div id="skier-1-label"></div>
                                    <div>Gap</div>
                                    <div id="skier-2-label"></div>
                                </div>
                                <div id="last-results-container"></div>
                            </div>
                            <div class="section-title">Actual ranking</div>
                            <div class="races-table">
                                <div class="header-line">
                                    <div>Position</div>
                                    <div>Skier</div>
                                    <div>Win(s)</div>
                                    <div>Time</div>
                                    <div>Difference</div>
                                </div>
                                <div id="actual-ranking-container"></div>
                            </div>
                            <div class="section-title">Next races</div>
                            <div class="races-table">
                                <div class="header-line">
                                    <div class="number">Race</div>
                                    <div>Track</div>
                                    <div>Skier</div>
                                    <div>Actual record</div>
                                </div>
                                <div id="next-races-container"></div>
                            </div>
                        </div>
                        <button id="start-race-button">Start</button>
                    </div>
                </div>
            </div>
            <div id="result">
                <div class="results-table">
                    <div class="header-line">
                        <div>Position</div>
                        <div>Skier</div>
                        <div>Date</div>
                        <div class="time">Time</div>
                        <div class="time">Difference</div>
                    </div>
                    <div id="results-container"></div>
                </div>

                <button id="back-to-manager">Continue</button>
            </div>
            <div id="track-name"></div>
            <div class="game-container">
                <canvas id="game"></canvas>
            </div>
            <div id="global-ghost-timing-container">
                <span class="timer-header">
                    <span class="material-symbols-outlined">timer</span>GR
                </span>
                <span id="global-ghost-timing" class="timer-value"></span>
            </div>
            <div id="event-ghost-timing-container">
                <span class="timer-header">
                    <span class="material-symbols-outlined">timer</span>ER
                </span>
                <span id="event-ghost-timing" class="timer-value"></span>
            </div>
            <div id="speedometer"></div>
            <div id="timer"></div>
        </div>
    </div>
    <script type="module" src="./src/browser-config.ts"></script>
    <script type="module" src="./src/game.ts"></script>
</body>

</html>