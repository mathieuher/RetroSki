<app-toolbar>
    <ng-container ngProjectAs="left-actions">
        <app-button-icon icon="close" (click)="goBack()"></app-button-icon>
    </ng-container>
    <ng-container ngProjectAs="right-actions">
        <app-button-icon
            icon="settings"
            routerLink="/settings"
        ></app-button-icon>
    </ng-container>
</app-toolbar>
<div class="retro-content">
    <form [formGroup]="form">
        <div class="retro-title">Create online event</div>
        <div class="retro-subtitle">Event details</div>
        <div class="retro-form-section">
            <div class="retro-form-line">
                <div class="label">Name</div>
                <input type="text" class="retro-input" formControlName="name" placeholder="3 to 16 char." />
            </div>
            <div class="retro-form-line">
                <div class="label">Type</div>
                <select class="retro-input" formControlName="type">
                    <option value="time-attack">Time-attack</option>
                    <option value="race">Race</option>
                </select>
            </div>
            @if(form.get('type')?.value === 'race') {
            <div class="retro-form-line">
                <div class="label">Number of races</div>
                    <input type="number" class="retro-input" formControlName="races" placeholder="1 to 10" />
            </div>
            }
        </div>
        <div class="retro-subtitle">Event track</div>
        <div class="retro-form-section">
            @if(tracks()?.length) {
            <div class="retro-form-line">
                <div class="label">Track</div>
                <select class="retro-input" formControlName="track">
                    <option value=null>Select a track</option>
                    @for (track of tracks(); track track.id) {
                    <option value="{{ track.id }}">{{ track.fullName }}</option>
                    }
                </select>
            </div>
            }
            <button class="retro-button tertiary" routerLink="/manage-online-tracks">Manage online tracks</button>
        </div>
    </form>
</div>
<div class="retro-footer">
    <button class="retro-button" (click)="createEvent()" [disabled]="!form.valid">Create event</button>
</div>